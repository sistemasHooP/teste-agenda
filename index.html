!DOCTYPE html
html lang=pt-PT
head
    meta charset=UTF-8
    meta name=viewport content=width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no
    titleMinha Agenda Protitle
    
    !-- Bibliotecas Externas --
    script src=httpscdn.tailwindcss.comscript
    script src=httpsunpkg.comlucide@latestscript
    
    !-- Estilos Refatorados --
    link rel=stylesheet href=cssstyles.css
head
body

    !-- ================== TELA DE LOGIN ================== --
    div id=login-screen
        div class=bg-white p-8 rounded-2xl shadow-xl w-full max-w-sm text-center
            div class=mb-6 flex justify-center text-blue-600
                i data-lucide=calendar-check class=w-12 h-12i
            div
            h1 class=text-2xl font-bold text-slate-800 mb-2Bem-vindoh1
            p class=text-slate-400 text-sm mb-6Acesse sua agenda profissionalp
            
            form onsubmit=fazerLogin(event)
                div class=space-y-4 mb-4
                    input type=email id=login-email required placeholder=Email class=w-full p-3 bg-slate-50 border rounded-xl outline-none focusring-2 focusring-blue-500 text-base
                    input type=password id=login-senha required placeholder=Senha class=w-full p-3 bg-slate-50 border rounded-xl outline-none focusring-2 focusring-blue-500 text-base
                div
                div class=flex items-center gap-2 mb-6 text-left px-1
                    input type=checkbox id=login-manter class=w-4 h-4 text-blue-600 rounded checked
                    label for=login-manter class=text-sm text-slate-500 cursor-pointerManter conectadolabel
                div
                button type=submit id=btn-login class=w-full py-3 btn-primary font-bold shadow-lg shadow-blue-200 btn-animEntrarbutton
            form
        div
    div

    div id=sync-indicator
        div class=spinner spinner-dark w-3 h-3div
        spanSincronizando...span
    div

    !-- ================== CABEÇALHO ================== --
    header id=app-header class=bg-white px-5 py-4 shadow-sm sticky top-0 z-20 flex justify-between items-center hidden
        div
            h1 class=text-lg font-bold text-slate-800 flex items-center gap-2 tracking-tight
                i data-lucide=calendar-days class=w-5 h-5 text-blue-600i 
                span id=header-titleMinha Agendaspan
            h1
            p class=text-xs text-slate-400 id=user-name-displayp
        div
        div class=flex items-center gap-3
            button onclick=document.getElementById('search-overlay').style.display='flex' class=p-2 text-slate-400 hovertext-blue-600 btn-anim bg-slate-50 rounded-full
                i data-lucide=search class=w-5 h-5i
            button
            select id=select-profissional-agenda onchange=mudarProfissionalAgenda() class=hidden text-xs bg-slate-100 border-none rounded-lg p-1 text-slate-600 outline-none text-baseselect
            button onclick=logout() class=text-slate-400 hovertext-red-500
                i data-lucide=log-out class=w-5 h-5i
            button
        div
    header

    !-- ================== BUSCA ================== --
    div id=search-overlay
        div class=bg-white p-4 border-b border-slate-100 flex items-center gap-3 shadow-sm
            button onclick=document.getElementById('search-overlay').style.display='none' class=text-slate-400i data-lucide=arrow-left class=w-6 h-6ibutton
            div class=flex-1 bg-slate-100 rounded-xl flex items-center px-3
                i data-lucide=search class=w-4 h-4 text-slate-400i
                input type=text id=input-busca placeholder=Buscar cliente... class=w-full p-3 bg-transparent outline-none text-base font-medium
            div
        div
        div id=search-results
            p class=text-center text-slate-400 mt-10 text-smDigite para buscar agendamentos.p
        div
    div

    !-- ================== ABAS ================== --

    !-- 1. AGENDA --
    div id=tab-agenda class=tab-content active style=padding-top 0; padding-left 0; padding-right 0;
        div class=bg-white shadow-sm border-b border-slate-100 sticky top-0 z-30 pb-2
            div class=flex justify-between items-center px-4 py-3
                span id=mes-ano-display class=text-lg font-bold text-slate-800 capitalizeJaneiro 2024span
                div class=flex items-center gap-2
                    button onclick=mudarSemana(-1) class=p-1 rounded-full hoverbg-slate-50 text-slate-400i data-lucide=chevron-left class=w-5 h-5ibutton
                    button onclick=mudarSemana(1) class=p-1 rounded-full hoverbg-slate-50 text-slate-400i data-lucide=chevron-right class=w-5 h-5ibutton
                div
            div
            div id=barra-dias-semana class=calendar-stripdiv
            input type=date id=data-picker class=hidden onchange=atualizarDataEPainel()
        div
        div class=p-4
            div class=bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden min-h-[400px]
                div id=agenda-timeline class=timeline-container pl-2 pr-2 pt-4 pb-10
                    div class=p-10 text-center text-slate-400
                        div class=spinner spinner-dark mx-auto mb-2 border-slate-300 border-t-blue-500div
                        pA carregar agenda...p
                    div
                div
                 div id=agenda-week-view class=hidden
                    div id=week-header class=week-header-row pl-[50px]div
                    div class=week-container id=week-griddiv
                div
            div
        div
    div

    !-- 2. SERVIÇOS --
    div id=tab-servicos class=tab-content admin-only
        div class=flex justify-between items-center mb-6
            h2 class=text-xl font-bold text-slate-800Serviçosh2
            button onclick=abrirModalServico() class=text-blue-600 text-sm font-bold bg-blue-50 px-3 py-1.5 rounded-lg btn-anim+ Novobutton
        div
        div id=lista-servicos class=space-y-3 pb-24div class=text-center text-slate-400 py-10Carregando...divdiv
    div

    !-- 3. PACOTES --
    div id=tab-pacotes class=tab-content admin-only
        div class=flex justify-between items-center mb-6
            h2 class=text-xl font-bold text-slate-800Pacotes Ativosh2
            button onclick=abrirModalVenderPacote() class=text-blue-600 text-sm font-bold bg-blue-50 px-3 py-1.5 rounded-lg btn-anim+ Venderbutton
        div
        div id=lista-pacotes class=space-y-3 pb-24div class=text-center text-slate-400 py-10Carregando pacotes...divdiv
    div

    !-- 4. EQUIPA --
    div id=tab-equipa class=tab-content admin-only
        div class=flex justify-between items-center mb-6
            h2 class=text-xl font-bold text-slate-800Profissionaish2
            button onclick=abrirModalUsuario() class=text-blue-600 text-sm font-bold bg-blue-50 px-3 py-1.5 rounded-lg btn-anim+ Novobutton
        div
        div id=lista-usuarios class=space-y-3 pb-24div class=text-center text-slate-400 py-10Carregando equipa...divdiv
    div

    !-- 5. CONFIGURAÇÕES --
    div id=tab-config class=tab-content admin-only
        h2 class=text-xl font-bold text-slate-800 mb-6Configuraçõesh2
        div class=bg-white p-6 rounded-2xl shadow-sm border border-slate-100 space-y-6 mb-24
            div class=flex border-b border-slate-100 mb-4
                button onclick=switchConfigTab('geral') id=btn-cfg-geral class=flex-1 py-2 text-sm font-bold text-blue-600 border-b-2 border-blue-600Horáriosbutton
                button onclick=switchConfigTab('msg') id=btn-cfg-msg class=flex-1 py-2 text-sm font-bold text-slate-400Mensagensbutton
            div
            div id=cfg-area-geral class=space-y-6
                div
                    label class=block text-sm text-slate-600 mb-2 font-mediumHorário de Funcionamentolabel
                    div id=lista-horarios-semana class=space-y-3div
                div
                div
                    label class=block text-sm text-slate-600 mb-1 font-mediumIntervalo (min)label
                    select id=cfg-intervalo class=w-full bg-slate-50 border border-slate-200 rounded-xl p-3 outline-none text-base
                        option value=1515 minoptionoption value=3030 minoptionoption value=601 horaoption
                    select
                div
                div
                    label class=flex items-center gap-3
                        input type=checkbox id=cfg-concorrencia class=w-5 h-5 text-blue-600 rounded
                        span class=text-slate-700 font-mediumPermitir Encaixes (Simultâneos)span
                    label
                div
            div
            div id=cfg-area-msg class=space-y-6 hidden
                div
                    label class=block text-sm text-slate-800 font-bold mb-1Modelo de Lembretelabel
                    p class=text-xs text-slate-400 mb-2Use {cliente}, {data}, {hora}, {servico}p
                    textarea id=cfg-lembrete-template rows=3 class=w-full bg-slate-50 border border-slate-200 rounded-xl p-3 outline-none text-sm text-slate-600textarea
                div
                div
                    label class=block text-sm text-slate-800 font-bold mb-2Mensagens Rápidaslabel
                    div id=lista-msg-rapidas class=space-y-2 mb-3div
                    div class=flex gap-2
                        input type=text id=nova-msg-rapida placeholder=Nova mensagem... class=flex-1 bg-slate-50 border border-slate-200 rounded-lg p-2 text-sm outline-none
                        button onclick=adicionarMsgRapida() class=bg-blue-100 text-blue-600 p-2 rounded-lg font-bold text-smAddbutton
                    div
                div
            div
            button onclick=salvarConfigAPI(this) class=w-full py-3 btn-primary font-bold shadow-lg shadow-blue-200 btn-animSalvar Alteraçõesbutton
        div
    div

    div id=main-fab class=fab btn-anim hidden onclick=acaoFab()i data-lucide=plusidiv

    !-- ================== MODAIS ================== --
    
    div id=modal-confirmacao class=modal-overlay style=z-index 120;
        div class=modal-card max-w-sm
            h3 class=text-lg font-bold text-slate-800 mb-2 id=confirm-tituloConfirmarh3
            p class=text-slate-600 mb-6 text-sm id=confirm-msgTem certezap
            div class=flex gap-3button id=btn-confirm-no class=flex-1 py-3 text-slate-500 font-bold hoverbg-slate-100 rounded-xl btn-animCancelarbuttonbutton id=btn-confirm-yes class=flex-1 py-3 bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-blue-200 btn-animSimbuttondiv
        div
    div

    div id=modal-aviso class=modal-overlay style=z-index 130;
        div class=modal-card max-w-sm text-center
            div class=mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4 text-blue-600i data-lucide=info class=w-6 h-6idiv
            p class=text-slate-800 font-medium mb-6 id=aviso-msgMensagemp
            button onclick=fecharModal('modal-aviso') class=w-full py-3 bg-slate-100 text-slate-700 font-bold rounded-xl btn-animOKbutton
        div
    div

    div id=modal-selecao-msg class=modal-overlay style=z-index 110;
        div class=modal-card
            div class=flex justify-between items-center mb-4h3 class=text-lg font-bold text-slate-800Enviar Mensagemh3button onclick=fecharModal('modal-selecao-msg')i data-lucide=x class=text-slate-400ibuttondiv
            div id=lista-selecao-msg class=space-y-2 max-h-60 overflow-y-autodiv
        div
    div

    div id=modal-agendamento class=modal-overlay
        div class=modal-card
            div class=flex justify-between items-center mb-6h3 class=text-xl font-bold text-slate-800Novo Agendamentoh3button onclick=fecharModal('modal-agendamento')i data-lucide=x class=text-slate-400ibuttondiv
            div class=modal-tabsdiv class=modal-tab active onclick=switchModalAgendaTab('agendar') id=tab-btn-agendarAgendardivdiv class=modal-tab onclick=switchModalAgendaTab('bloquear') id=tab-btn-bloquearBloqueardivdiv
            
            form id=form-agendar onsubmit=salvarAgendamentoOtimista(event) class=tab-agenda-mode active
                div class=space-y-4
                    div id=div-select-prof-modal class=hiddenlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Profissionallabelselect id=select-prof-modal class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-baseselectdiv
                    divlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Clientelabeldiv class=flex gap-2input list=lista-clientes type=text id=input-cliente-nome name=nome_cliente required placeholder=Buscar cliente... class=w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focusring-2 focusring-blue-500 text-base onchange=verificarPacoteDisponivel()datalist id=lista-clientesdatalistbutton type=button onclick=abrirModalCliente() class=p-3 bg-blue-100 text-blue-600 rounded-xl hoverbg-blue-200 btn-animi data-lucide=user-plus class=w-5 h-5ibuttondivdiv
                    divlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Serviçolabelinput list=lista-servicos-datalist type=text id=input-servico-nome name=nome_servico required placeholder=Buscar serviço... class=w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focusring-2 focusring-blue-500 text-base onchange=verificarPacoteDisponivel()datalist id=lista-servicos-datalistdatalistdiv
                    div id=area-pacote-info class=hidden bg-green-50 p-3 rounded-xl border border-green-200 flex items-center justify-betweendivp class=text-xs font-bold text-green-700 uppercasePacote Disponívelpp class=text-sm text-green-800Restam span id=pacote-saldo0span sessõespdivlabel class=flex items-center gap-2 cursor-pointerinput type=checkbox id=check-usar-pacote class=w-5 h-5 text-green-600 rounded focusring-green-500 checkedspan class=text-sm font-bold text-green-700Usarspanlabelinput type=hidden id=id-pacote-selecionadodiv
                    div class=grid grid-cols-2 gap-3divlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Datalabelinput type=date id=input-data-modal name=data_agendamento required class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basedivdivlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Horáriolabelinput type=time id=input-hora-modal name=hora_inicio required class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basedivdiv
                div
                button type=submit id=btn-salvar-agenda class=w-full mt-6 py-3 btn-primary font-bold btn-animConfirmar Agendamentobutton
            form

            form id=form-bloquear onsubmit=salvarBloqueio(event) class=tab-agenda-mode hidden
                div class=space-y-4
                    div class=bg-slate-100 p-4 rounded-xl text-sm text-slate-500 mb-4 flex items-start gap-2i data-lucide=lock class=w-5 h-5 mt-0.5ipBloqueie este horário para impedir agendamentos.pdiv
                    divlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Motivolabelinput type=text name=motivo required placeholder=Ex Almoço, Médico... class=w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focusring-2 focusring-slate-400 text-basediv
                    div class=grid grid-cols-2 gap-3divlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Iníciolabelinput type=time id=input-hora-bloqueio name=hora_inicio required class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basedivdivlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Duração (min)labelinput type=number name=duracao value=60 required class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basedivdivinput type=hidden id=input-data-bloqueio name=data_bloqueio
                div
                button type=submit id=btn-salvar-bloqueio class=w-full mt-6 py-3 bg-slate-700 text-white font-bold rounded-xl btn-animBloquear Horáriobutton
            form
        div
    div

    !-- Modais restantes --
    div id=modal-editar-agendamento class=modal-overlaydiv class=modal-carddiv class=flex justify-between items-center mb-6h3 class=text-xl font-bold text-slate-800Editar Horárioh3button onclick=fecharModal('modal-editar-agendamento')i data-lucide=x class=text-slate-400ibuttondivform id=form-editar-agendamento onsubmit=salvarEdicaoAgendamento(event)input type=hidden id=edit-agenda-iddiv class=space-y-4divp class=text-xs font-bold text-slate-400 uppercase mb-1Clientepp id=edit-agenda-cliente class=text-lg font-bold text-slate-800pp id=edit-agenda-servico class=text-sm text-slate-500pdivdiv class=grid grid-cols-2 gap-3divlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Nova Datalabelinput type=date id=edit-agenda-data name=nova_data required class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basedivdivlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Novo Horáriolabelinput type=time id=edit-agenda-hora name=novo_horario required class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basedivdivdivbutton type=submit id=btn-salvar-edicao-agenda class=w-full mt-6 py-3 btn-primary font-bold btn-animAtualizarbuttonformdivdiv
    div id=modal-vender-pacote class=modal-overlaydiv class=modal-carddiv class=flex justify-between items-center mb-6h3 class=text-xl font-bold text-slate-800Vender Pacoteh3button onclick=fecharModal('modal-vender-pacote')i data-lucide=x class=text-slate-400ibuttondivform id=form-pacote onsubmit=salvarVendaPacote(event)div class=space-y-4divlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Clientelabelinput list=lista-clientes name=nome_cliente required placeholder=Buscar cliente... class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basedivdiv class=bg-slate-50 p-3 rounded-xl border border-slate-200label class=block text-xs font-bold text-slate-500 uppercase mb-2Adicionar Itenslabeldiv class=flex gap-2 mb-2input list=lista-servicos-datalist type=text id=input-servico-pacote-nome placeholder=Buscar serviço... class=flex-1 p-2 bg-white border rounded-lg text-sm outline-none text-baseinput type=number id=qtd-servico-pacote value=1 min=1 class=w-16 p-2 bg-white border rounded-lg text-sm text-center outline-none text-basebutton type=button onclick=adicionarItemAoPacote() class=p-2 bg-blue-600 text-white rounded-lg hoverbg-blue-700 btn-animi data-lucide=plus class=w-4 h-4ibuttondivdiv id=lista-itens-pacote class=space-y-1 mb-2 max-h-40 overflow-y-autop class=text-xs text-slate-400 text-center py-2Nenhum item adicionado.pdivdivdiv class=grid grid-cols-2 gap-3divlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Validadelabelinput type=date name=validade class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basedivdivlabel class=block text-xs font-bold text-slate-500 uppercase mb-1 ml-1Valor Totallabelinput type=number step=0.01 id=valor-total-pacote name=valor_total required placeholder=0,00 class=w-full p-3 bg-slate-50 border rounded-xl outline-none font-bold text-slate-700 text-lg text-basedivdivdivbutton type=submit id=btn-salvar-pacote class=w-full mt-6 py-3 btn-primary font-bold btn-animConfirmar Vendabuttonformdivdiv
    div id=modal-cliente class=modal-overlaydiv class=modal-carddiv class=flex justify-between items-center mb-6h3 class=text-xl font-bold text-slate-800Cadastrar Clienteh3button onclick=fecharModal('modal-cliente')i data-lucide=x class=text-slate-400ibuttondivform id=form-cliente onsubmit=salvarNovoCliente(event)div class=space-y-4input type=text name=nome required class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-base placeholder=Nome Completoinput type=tel name=whatsapp class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-base placeholder=WhatsAppinput type=email name=email class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-base placeholder=Emaildivbutton type=submit id=btn-salvar-cliente class=w-full mt-6 py-3 btn-primary font-bold btn-animSalvar e Usarbuttonformdivdiv
    div id=modal-servico class=modal-overlaydiv class=modal-carddiv class=flex justify-between items-center mb-6h3 class=text-xl font-bold text-slate-800Novo Serviçoh3button onclick=fecharModal('modal-servico')i data-lucide=x class=text-slate-400ibuttondivform id=form-servico onsubmit=salvarNovoServico(event)div class=space-y-4input type=text name=nome_servico required placeholder=Nome do Serviço class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basediv class=grid grid-cols-2 gap-3input type=number step=0.01 name=valor_unitario placeholder=Preço required class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-baseinput type=number name=duracao_minutos placeholder=Minutos required value=60 class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basedivdivlabel class=block text-xs font-bold text-slate-500 uppercase mb-1Imagemlabelinput type=file id=input-imagem-servico accept=image class=w-full text-smdivdivlabel class=flex items-center gap-3 p-2 bg-slate-50 rounded-lg cursor-pointerinput type=checkbox id=check-online-booking class=w-5 h-5 text-blue-600 roundedspan class=text-sm font-bold text-slate-700Onlinespanlabeldivdivp class=text-xs font-bold text-slate-500 mb-2Corpdiv id=color-picker-container class=flex justify-betweendivinput type=hidden name=cor_hex id=input-cor-selecionada value=#3b82f6divdivbutton type=submit id=btn-salvar-servico class=w-full mt-6 py-3 btn-primary font-bold btn-animSalvarbuttonformdivdiv
    div id=modal-editar-servico class=modal-overlaydiv class=modal-carddiv class=flex justify-between items-center mb-6h3 class=text-xl font-bold text-slate-800Editar Serviçoh3button onclick=fecharModal('modal-editar-servico')i data-lucide=x class=text-slate-400ibuttondivform id=form-editar-servico onsubmit=salvarEdicaoServico(event)input type=hidden name=id_servico id=edit-id-servicodiv class=space-y-4input type=text name=nome_servico id=edit-nome-servico required placeholder=Nome do Serviço class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basediv class=grid grid-cols-2 gap-3input type=number step=0.01 name=valor_unitario id=edit-valor-servico placeholder=Preço required class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-baseinput type=number name=duracao_minutos id=edit-duracao-servico placeholder=Minutos required class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-basedivdivlabel class=block text-xs font-bold text-slate-500 uppercase mb-1Nova Imagemlabelinput type=file id=edit-input-imagem-servico accept=image class=w-full text-smdivdivlabel class=flex items-center gap-3 p-2 bg-slate-50 rounded-lg cursor-pointerinput type=checkbox id=edit-check-online-booking class=w-5 h-5 text-blue-600 roundedspan class=text-sm font-bold text-slate-700Onlinespanlabeldivdivp class=text-xs font-bold text-slate-500 mb-2Corpdiv id=edit-color-picker-container class=flex justify-betweendivinput type=hidden name=cor_hex id=edit-input-cor-selecionadadivdivdiv class=flex gap-3 mt-6button type=button onclick=excluirServicoViaModal() class=flex-1 py-3 text-red-600 font-bold hoverbg-red-50 rounded-xl btn-anim border border-red-200Excluirbuttonbutton type=submit id=btn-salvar-edicao-servico class=flex-1 py-3 btn-primary font-bold btn-animSalvar Alteraçõesbuttondivformdivdiv
    div id=modal-detalhes-pacote class=modal-overlaydiv class=modal-carddiv class=flex justify-between items-center mb-4h3 class=text-xl font-bold text-slate-800Detalhes do Pacoteh3button onclick=fecharModal('modal-detalhes-pacote')i data-lucide=x class=text-slate-400ibuttondivdiv class=modal-tabsdiv class=modal-tab active onclick=switchModalTab('saldos')Saldosdivdiv class=modal-tab onclick=switchModalTab('historico')Históricodivdivdiv id=tab-modal-saldos class=modal-tab-content active space-y-3 max-h-60 overflow-y-autodivdiv id=tab-modal-historico class=modal-tab-content space-y-2 max-h-60 overflow-y-autop class=text-center text-slate-400 text-smCarregando...pdivdivdiv
    div id=modal-usuario class=modal-overlaydiv class=modal-carddiv class=flex justify-between items-center mb-6h3 class=text-xl font-bold text-slate-800Novo Profissionalh3button onclick=fecharModal('modal-usuario')i data-lucide=x class=text-slate-400ibuttondivform id=form-usuario onsubmit=salvarUsuario(event)div class=space-y-4input type=text name=nome required placeholder=Nome class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-baseinput type=email name=email required placeholder=Email class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-baseinput type=text name=senha required placeholder=Senha class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-baseselect name=nivel class=w-full p-3 bg-slate-50 border rounded-xl outline-none text-baseoption value=padraoPadrãooptionoption value=adminAdminoptionselectdivbutton type=submit id=btn-salvar-usuario class=w-full mt-6 py-3 btn-primary font-bold btn-animSalvarbuttonformdivdiv

    div id=modal-detalhes class=modal-overlay
        div class=modal-card
            div class=flex justify-between items-start mb-4divh3 id=detalhe-cliente class=text-2xl font-bold text-slate-800 leading-tightClienteh3p id=detalhe-servico class=text-sm text-slate-500 font-medium mt-1Serviçopdivdiv onclick=fecharModal('modal-detalhes') class=p-2 -mr-2 text-slate-400 hovertext-slate-600 cursor-pointeri data-lucide=x class=w-6 h-6idivdiv
            div class=bg-slate-50 rounded-xl p-4 border border-slate-100 mb-6 flex justify-between items-centerdivdiv class=flex items-center gap-2 mb-1i data-lucide=calendar class=w-4 h-4 text-slate-400ispan id=detalhe-data class=font-bold text-slate-700Dataspandivdiv class=flex items-center gap-2i data-lucide=clock class=w-4 h-4 text-slate-400ispan id=detalhe-hora class=font-bold text-slate-700Horaspandivdivdiv id=detalhe-status-badge class=px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-bold uppercaseAgendadodivdiv
            div id=acoes-whatsapp-areah4 class=text-xs font-bold text-slate-400 uppercase mb-3 ml-1Comunicaçãoh4div class=grid grid-cols-3 gap-3 mb-6button onclick=enviarLembrete() class=whatsapp-btn btn-animi data-lucide=bell-ringispanLembretespanbuttonbutton onclick=abrirSelecaoMsgRapida() class=whatsapp-btn btn-animi data-lucide=message-squareispanRápidaspanbuttonbutton onclick=abrirChatDireto() class=whatsapp-btn btn-animi data-lucide=message-circleispanConversarspanbuttondivdiv
            h4 class=text-xs font-bold text-slate-400 uppercase mb-3 ml-1Açõesh4
            div class=space-y-3
                button id=btn-confirmar onclick=prepararStatus('Confirmado', this) class=w-full p-3 bg-blue-50 text-blue-700 font-bold rounded-xl text-sm border border-blue-100 flex items-center justify-center gap-2 btn-animi data-lucide=thumbs-up class=w-4 h-4i Confirmar Presençabutton
                button id=btn-concluir onclick=prepararStatus('Concluido', this) class=w-full p-3 bg-slate-100 text-slate-600 font-bold rounded-xl text-sm flex items-center justify-center gap-2 btn-animi data-lucide=check class=w-4 h-4i Marcar como Realizadobutton
                div class=grid grid-cols-2 gap-2 pt-2button id=btn-editar-horario onclick=abrirModalEditarAgendamento() class=p-3 bg-slate-50 text-slate-600 font-bold rounded-xl text-xs hoverbg-slate-100 btn-anim flex flex-col items-center gap-1i data-lucide=clock class=w-4 h-4i Editarbuttonbutton id=btn-cancelar onclick=prepararStatus('Cancelado', this) class=p-3 bg-red-50 text-red-600 font-bold rounded-xl text-xs hoverbg-red-100 btn-anim flex flex-col items-center gap-1i data-lucide=x-circle class=w-4 h-4i Cancelarbuttondiv
                button id=btn-excluir onclick=prepararStatus('Excluir', this) class=hidden w-full p-3 text-red-400 text-xs font-bold mt-2Apagar Permanentementebutton
            div
            input type=hidden id=id-agendamento-ativoinput type=hidden id=id-pacote-agendamento-ativo
        div
    div

    !-- NAVBAR --
    nav id=bottom-nav class=bottom-nav hidden
        div class=nav-item active onclick=switchTab('agenda', this)i data-lucide=calendarispanAgendaspandiv
        div class=nav-item admin-only onclick=switchTab('servicos', this)i data-lucide=sparklesispanServiçosspandiv
        div class=nav-item admin-only onclick=switchTab('pacotes', this)i data-lucide=packageispanPacotesspandiv
        div class=nav-item admin-only onclick=switchTab('equipa', this)i data-lucide=usersispanEquipaspandiv
        div class=nav-item admin-only onclick=switchTab('config', this)i data-lucide=settings-2ispanConfigspandiv
    nav

    !-- SCRIPTS MODULARES ORDEM DE CARREGAMENTO É CRÍTICA --
    script src=jsutils.jsscript
    script src=jsapi.jsscript
    script src=jsui.jsscript
    script src=jsapp.jsscript

    !-- Inicialização da Aplicação --
    script
        document.addEventListener('DOMContentLoaded', () = {
            const storedUser = localStorage.getItem('minhaAgendaUser')  sessionStorage.getItem('minhaAgendaUser');
            if (storedUser) {
                try {
                    currentUser = JSON.parse(storedUser);
                    iniciarApp();
                } catch(e) {
                    console.error('Erro ao recuperar sessão', e);
                    localStorage.removeItem('minhaAgendaUser');
                    sessionStorage.removeItem('minhaAgendaUser');
                }
            } else {
                document.getElementById('login-screen').style.display = 'flex';
            }
        });
    script
body
html